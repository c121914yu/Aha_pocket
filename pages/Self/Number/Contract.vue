<!-- 合同 & 电子前面 -->
<template>
	<view 
		class="contract"
		:class="showSign ? 'unmove' : ''">
		<view class="center h3">Aha 平台知识产权许可使用合同</view>
		<view class="title">
			<view class="item">
				<text>甲方: </text><view class="name">Aha 口袋科技有限公司</view>
			</view>
			<view class="item">
				<text>乙方: </text><view class="name"></view>
			</view>
		</view>
		<view class="strong">一、总则</view>
		<view class="content">
			<view class="intent">Aha口袋是面向浙江工业大学在读学生的科研项目及衍生孵化作品分享平台，主要运营模式是由用户在本平台上传资源，继而由平台对上传内容在一定范围内进行资源共享，以实现浙江工业大学相关科研项目的可持续发展，满足浙江工业大学在校师生和校友的科研需求。本合同手写部分与打印部分具有相同效力。</view>
			<view>（1）甲方为乙方提供上传空间及在线分享渠道，并基于上传资源价值给予乙方平台贡献点，乙方向甲方提供上传资源。</view>
			<view>（2）所涉上传资源知识产权由甲方、乙方双方共有，乙方许可甲方享有对上传资源的编辑权限及一定范围内的使用权限（包括在资源上增加水印、开放平台阅读复制权限）。</view>
			<view>（3）乙方上传资源能够获得的平台贡献点以本合同规定为准。</view>
			<view>（4）平台贡献点获得方式及使用方式、乙方上传资源所能获得的贡献点值由本平台拟定，具体判断标准如下：\n&emsp;&emsp;用户可上传的资源类型为PPT、文档、论文、成果演示、竞赛心得，用户上传的资源通过分类和获奖等级赋予不同的贡献点值。</view>
			<image src="https://aha-public.oss-cn-hangzhou.aliyuncs.com/AhaIcon/contract1.jpg" mode="widthFix"></image>
			<view class="red strong">(注:以上区分标签中资源意义位阶划分由平台评审委员会做出,评审委员会由 师生组成。\n&emsp;&emsp;为保证意思自治及公平公开原则的实现,评审委员会在做出评审结果后将 即时通知乙方,乙方若同意评审结果,甲方将按评审结果确定贡献值并发布资源。\n&emsp;&emsp;若乙方对评审结果有异议,可以在收到通知后 5 日内向平台反馈。未经乙方同意,甲方承诺不会将乙方提供资源上传平台。)</view>
			<image src="https://aha-public.oss-cn-hangzhou.aliyuncs.com/AhaIcon/contract2.jpg" mode="widthFix"></image>
			<view>（5）本平台的用户范围仅限浙江工业大学在校学生，使用范围仅限于浙江工业 大学内，资源范围仅限于浙江工业大学内由学生产生、培育、孵化的相关资源。</view>
			<view>（6）本平台享有对平台运营模式的最终解释权。 </view>
		</view>
		<view class="strong">二、甲方权利和义务</view>
		<view class="content">
			<view>（1）甲方有权将乙方提供的资源向平台使用者开放，使用者可以通过充值等手 段获得贡献点并按照平台说明使用，乙方不得随意干涉。</view>
			<view>（2）甲方有权要求乙方提供资源原创承诺书，对于虚假承诺和违反承诺书造成 的侵权行为，甲方原则上不承担任何责任，如甲方需对外承担侵权责任，则保留 向乙方追责的权利，由此而造成平台的损失，由乙方承担。</view>
			<view>（3）甲方应当遵守相关法律法规及本合同下各项使用规定，否则，乙方有权立 即暂停或终止相关授权，并解除本合同，甲方还应当赔偿由此给乙方造成的损失。</view>
			<view>（4）甲方对乙方上传资源的适用范围仅限于浙江工业大学在读学生。</view>
			<view class="red">（5）甲方可以对乙方提交资源进行添加水印等操作。 </view>
			<view>（6）甲方负责按照合同约定向乙方支付相应的金钱报酬或者贡献点，甲方逾期三日内未按照本合同约定付款的，乙方有权单方解除合同，并追究甲方违约责任。</view>
		</view>
		<view class="strong">三、乙方权利和义务</view>
		<view class="content">
			<view>（1）乙方应当在与甲方的约定的期限内，通过自行注册账号成为平台用户的乙 方应当在注册平台账号后签署并向甲方提供针对其向甲方提供的资源的原创承 诺书，担保其向平台提供的资源为其原创成果，不存在侵犯他人合法权益的情形。 乙方向甲方提供侵犯他人知识产权等合法权益的资源的行为以及由乙方提供的 资源本身的问题引发的诉讼均与甲方无关，并且甲方有权基于乙方的行为追究乙 方的违约责任。若甲方实际上因乙方提供侵犯他人知识产权等合法权益的资源的 行为遭受的损失，以及因乙方前述行为参加诉讼有支出的一系列费用，甲方有权 要求乙方予以赔偿并且甲方有权追究乙方的违约责任。</view>
			<view>（2）乙方应当在与甲方的约定的期限内，通过自行注册账号成为平台用户的乙 方应当在注册平台账号后与甲方签署权利授予和转让协议。乙方应授权平台以一 切合理并常规的方式（如加上平台的水印等）对乙方提供的资源进行操作，授权 平台向以平台贡献值进行兑换的用户开放阅读和每次不多于 50 字的复制的权限。 乙方与甲方共同享有乙方提供的资源的完整的知识产权。</view>
			<view>（3）乙方有权在向平台提供其原创资源时按照平台制定的等级规则获得相应的 金钱报酬或者在提供资源后按照平台制定资源等级规则以及资源下载量的一定 比例获得贡献点。 </view>
			<view>（4）乙方有权通过充值平台的 VIP 获得相应的贡献点。</view>
			<view>（5）乙方注销账户前向平台提供的资源的相关权利状态以及纠纷解决方式不受 乙方注销账户的行为的影响。</view>
		</view>
		<view class="strong">四、免责条款 </view>
		<view class="content">
			<view>（1）甲方只是为乙方提供一个服务交易的平台，对于用户所发布的需求的合法 性、真实性及其品质，以及其他用户履行交易的能力等，甲方一律不负任何担保 责任。 </view>
			<view>（2）甲方充分尊重原创作者的著作权和知识产权。甲方合理信赖乙方上传原创 产品,上传者就是原创作者或是已经征得著作权人的同意并与著作权人就相关问 题作出了妥善处理。甲方对于有关原创数字产品的买卖以及使用属于合理行为，因此与之有关的知识产权纠纷，甲方不承担任何责任。</view>
			<view>（3）乙方要求恢复被已删除非法、侵权文件，必须认真预览甲方免责声明后再 提交申请恢复。若恢复后出现非法、侵权行为，由申请恢复者自行承担法律责任， 甲方不承担任何法律责任。</view>
			<view>（4）以下情形导致的个人信息泄露，甲方免责：</view>
			<view>（一）政府部门、司法机关等依照法定程序要求本平台披露个人资料时，本平台 将根据执法单位之要求或为公共安全之目的提供个人资料；</view>
			<view>（二）由于用户将个人密码告知他人或与他人共享注册账户，由此导致的任何个 人资料泄露；</view>
			<view>（三）任何由于计算机问题、黑客攻击、计算机病毒侵入或发作、因政府管制而 造成的暂时性关闭等影响网络正常经营的不可抗力而造成的个人资料泄露、丢失、被盗用或被窜改等；</view>
			<view>（四）由于与本平台链接的其他平台所造成之个人资料泄露；</view>
			<view>（5）因不可抗力或者其他意外事件，使得本合同的履行不可能、不必要或者无意义的，双方均不承担责任。本合同所称之不可抗力意指不能预见、不能避免并 不能克服的客观情况，该事件妨碍、影响或延误本平台履行其全部或部分义务， 包括但不限于战争、台风、水灾、火灾、雷击或地震、罢工、暴动、法定疾病、 黑客攻击、网络病毒、电信部门技术管制、政府行为或任何其它自然或人为造成 的灾难等客观情况。</view>
			<view>（6）除甲方注明之服务条款外，其他一切因使用本平台而引致之任何意外、疏 忽、诽谤、版权或知识产权侵犯及其所造成的损失（包括因下载而感染电脑病毒）， 本平台不承担任何法律责任。</view>
			<view>（7）若因本平台产生任何诉诸于诉讼程序的法律争议，均以甲方所在地法院 为管辖法院。</view>
		</view>
		<view class="strong">五、违约责任</view>
		<view class="content">
			<view>（1）甲方没有按照合同要求履行甲方应承担的责任，则由甲方承担由此带来的 后果。若对乙方权益造成损害，则要求甲方立即停止侵害、及时弥补乙方损失。</view>
			<view>（2）甲方未及时向乙方支付报酬的，乙方可要求甲方及时支付报酬，若逾期三 个月未及时支付报酬，则加收 10%的违约费用。</view>
			<view>（3）甲方无正当理由提前终止、解除或者撤销协议的，已支付乙方的费用乙方 可不退还，未支付费用，乙方有权要求甲方支付费用。</view>
			<view>（4）乙方违反本合同约定造成甲方收到相关部门处罚或对第三方承担责任的， 乙方应当赔偿因此给甲方造成的全部损失。</view>
			<view>（5）乙方无正当理由提前终止、解除或者撤销协议的，应退还甲方已支付费用， 承担甲方损失，并支付甲方合同总金额 20%的违约金。</view>
			<view>（6）若乙方提供的内容有侵害他人著作权及其他知识产权或其他权利，乙方应 当负责与被侵权方交涉，并承担可能发生的一切法律责任和费用。若因被侵权方 的侵权指控成立而造成甲方损失的，乙方应当向甲方承担由此造成的一切直接或 间接损失；甲方因处理与第三方之产权纠纷而支出的一切费用，包括但不限于律 师费和诉讼费，甲方有权向乙方追偿。同时，平台可对作者采取包括但不限于暂 停服务，限制、冻结或终止账号使用，扣取账户余额，不支付收益，解除双方间 的服务协议和法律关系，追究法律责任等措施。</view>
			<view>（7）本合同自签订之日起生效，任何一方违反本合同约定的，都应赔偿因此给 守约方造成的损失。</view>
		</view>
		<view style="margin: 10px 0;">（特别说明：本合同一式贰份，甲方一份，乙方一份，具有同等法律效力）</view>
		<!-- 签名 -->
		<view class="signature">
			<view class="name">
				姓名: <input type="text" v-model="name">
			</view>
			<view class="signature-view">
				签名：
				<image 
					v-if="signUrl" 
					:src="signUrl" 
					mode="widthFix">
				</image>
			</view>
		</view>
		
		<button style="background-color: #5d7092;" @click="showSign=true">进入签名</button>
		<button v-if="signUrl" @click="confirm">确认</button>
		<Signature 
			v-if="showSign"
			@confirm="confirmSign">
		</Signature>
	</view>
</template>

<script>
import Signature from "./components/Signature.vue"
export default {
	data() {
		return {
			signedNotice: false,
			showSign: false,
			signUrl: "",
			name: ""
		}
	},
	methods: {
		/* 
			name: 签名完成
			desc: 签名完成，获取签名图片url并展示在界面
			input:
						url: String,签名URL
		*/
		confirmSign(url)
		{
			this.signUrl = url
			this.showSign = false
			uni.pageScrollTo({
				duration: 0,
				scrollTop: 10000
			})
		},
		/* 
			name: 确认签署
			desc: 确认签署合同，将签名图片发送会后台.
		*/
		confirm()
		{
			uni.showLoading({
				title: "请求中"
			})
			if(this.name === "")
			{
				this.gToastError("请输入姓名")
				return
			}
			uni.uploadFile({
				url: getApp().globalData.baseUrl + "/sign/contract",
				filePath: this.signUrl,
				name: "file",
				header: {
					'Authorization': uni.getStorageSync("token")
				},
				formData: {
					name: this.name,
				},
				success: (res) => {
					const data = JSON.parse(res.data)
					if(data.code === 200){
						uni.setStorageSync("token",data.data.token)
						getApp().globalData.gUserInfo.signedContract = true
					}
					uni.navigateBack({
						delta: 1,
						success: () => {
							this.gToastSuccess(data.msg)
						}
					})
				},
				fail: (err) => {
					console.log(err)
				}
			})
		}
	},
	components:{
		Signature
	}
}
</script>

<style lang="stylus" scoped>
.contract
	min-height 100vh
	padding 10px
	white-space pre-wrap
	font-size 26rpx
	&.unmove
		height 100vh
		overflow hidden
	.title .item
		margin 10px 10% 10px 0
		display flex
		.name
			margin-left 5px
			flex 1
			border-bottom var(--border1)
			display flex
			justify-content center
	.content
		.intent
			text-indent 52rpx
		.red
			color #F56C6C
		image
			width 100%
	.name,.signature-view
		margin-bottom 5px
		white-space nowrap
		display flex
		align-items center
		input
			margin-left 10px
			border-bottom 1px solid var(--gray1)
			border-radius 0
		image
			width 150rpx
	button
		margin 10px 0
		color #FFFFFF
		background-color var(--origin2)
</style>

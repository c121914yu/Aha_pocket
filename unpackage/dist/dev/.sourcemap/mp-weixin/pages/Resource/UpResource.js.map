{"version":3,"sources":["uni-app:///main.js","webpack:///D:/服务外包/竞赛统计/pages/Resource/UpResource.vue?0e9f","webpack:///D:/服务外包/竞赛统计/pages/Resource/UpResource.vue?0e85","webpack:///D:/服务外包/竞赛统计/pages/Resource/UpResource.vue?d998","webpack:///D:/服务外包/竞赛统计/pages/Resource/UpResource.vue?0ec1","uni-app:///pages/Resource/UpResource.vue","webpack:///D:/服务外包/竞赛统计/pages/Resource/UpResource.vue?ccd0","webpack:///D:/服务外包/竞赛统计/pages/Resource/UpResource.vue?c308"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yG;AACAA,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACgB;;;AAGzE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,kLAEN;AACL,GAAG;AACH;AACA,WAAW,0MAEN;AACL,GAAG;AACH;AACA,WAAW,4KAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwKxnB,oF;AACA;AACA,MADA,kBACA;AACA;AACA;AACA;AACA;AACA,eADA;AAEA,oBAFA;AAGA,kBAHA;AAIA,cAJA,EAIA;AACA,yBALA;AAMA,uBANA;AAOA,mBAPA,EAOA;AACA,oBARA,EAQA;AACA,uBATA,EASA;AACA,qBAVA,EAUA;AACA,4DAXA,EAWA;AACA,8CAZA;AAaA,0BAbA;AAcA,8BAdA;AAeA,mBAfA;;AAiBA,GAtBA;AAuBA;AACA;;;;;;;;;;AAUA,aAXA,qBAWA,CAXA;AAYA;AACA;AACA;AACA,KAfA;AAgBA;;;;;;;AAOA,YAvBA;AAwBA;AACA;AACA,gBADA;AAEA,yBAFA;AAGA,6BAHA;AAIA,iBAJA;AAKA,sBALA;;AAOA,KAhCA;AAiCA;;;;;;;;;AASA,cA1CA,sBA0CA,KA1CA;AA2CA;AACA;AACA,gBADA,EACA;AACA,4CAFA,EAEA;AACA;AACA;AACA,SALA;;AAOA,KAnDA;AAoDA;;;;;;;;;;AAUA,gBA9DA,wBA8DA,GA9DA,EA8DA,KA9DA;AA+DA;AACA;AACA;AACA;AACA,OAHA;;AAKA;AACA;AACA;AACA,KAxEA;AAyEA;;;;;;;;AAQA,eAjFA,uBAiFA,GAjFA;AAkFA;AACA;AACA,mBADA;;AAGA,KAtFA;AAuFA;;;;;;;;;AASA,eAhGA,uBAgGA,KAhGA;AAiGA;AACA;AACA,kBADA;AAEA;AACA;AACA,OAJA;;AAMA,KAxGA;AAyGA;;;;;AAKA,cA9GA;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA,gBADA;AAEA,mBAFA;AAGA;AACA;AACA;AACA,6BADA;AAEA,4BAFA;AAGA,yCAHA;;AAKA,WANA;AAOA,SAXA;AAYA;AACA;AACA;AACA,SAfA;AAgBA;AACA;AACA,SAlBA;;AAoBA,KAjJA;AAkJA;;;;;;;;;AASA,cA3JA,sBA2JA,KA3JA;AA4JA;AACA;AACA,kCADA;AAEA;AACA;AACA,OAJA;;AAMA,KAnKA;AAoKA,UApKA,kBAoKA,IApKA;AAqKA;AACA;AACA;AACA,KAxKA;AAyKA;;;;;;;AAOA,cAhLA;AAiLA;AACA;AACA;AACA,yBADA;AAEA,mCAFA;AAGA,+BAHA;AAIA,uBAJA;AAKA,6DALA;AAMA,mCANA;AAOA,yCAPA;AAQA,iEARA;AASA,qCATA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjPA;AAkPA;;;;;AAKA,eAvPA;AAwPA;AACA;AACA,yBADA;AAEA,kBAFA;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UADA,CACA;AACA;AACA,2BADA;AAEA,oBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WATA;AAUA,eAVA,CAUA;AACA;AACA;AACA,WAbA;AAcA,SAlBA;;AAoBA;AACA;AACA;AACA,cADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WATA;AAUA,eAVA,CAUA;AACA;AACA;AACA,WAbA;AAcA,SAfA;AAgBA,OA7CA;AA8CA,WA9CA,CA8CA;AACA;AACA;AACA,OAjDA;AAkDA,KAtTA;AAuTA;;;;;;AAMA,WA7TA,mBA6TA,IA7TA;AA8TA;AACA;AACA;AACA;AACA,UADA,CACA;AACA;AACA;AACA,OAJA;AAKA;AACA,KAvUA,EAvBA;;AAgWA,QAhWA,oBAgWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA3WA,E;;;;;;;;;;;;;ACzKA;AAAA;AAAA;AAAA;AAA4mC,CAAgB,ulCAAG,EAAC,C;;;;;;;;;;;ACAhoC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/Resource/UpResource.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/Resource/UpResource.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./UpResource.vue?vue&type=template&id=08607481&\"\nvar renderjs\nimport script from \"./UpResource.vue?vue&type=script&lang=js&\"\nexport * from \"./UpResource.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UpResource.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/Resource/UpResource.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./UpResource.vue?vue&type=template&id=08607481&\"","var components = {\n  SPicker: function() {\n    return import(\n      /* webpackChunkName: \"components/SPicker/SPicker\" */ \"@/components/SPicker/SPicker.vue\"\n    )\n  },\n  SearchInput: function() {\n    return import(\n      /* webpackChunkName: \"components/SearchInput/SearchInput\" */ \"@/components/SearchInput/SearchInput.vue\"\n    )\n  },\n  MdEdit: function() {\n    return import(\n      /* webpackChunkName: \"components/MdEdit/MdEdit\" */ \"@/components/MdEdit/MdEdit.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isEdit = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.descriptionMD = $event\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./UpResource.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./UpResource.vue?vue&type=script&lang=js&\"","<!-- 资源分享 -->\r\n<template>\n\t<view class=\"up-resource\">\r\n\t\t<!-- 标题 -->\r\n\t\t<view class=\"info title\">\r\n\t\t\t<input \r\n\t\t\t\ttype=\"text\" \r\n\t\t\t\tplaceholder=\"资源标题\" \r\n\t\t\t\tv-model=\"title\"/>\r\n\t\t</view>\r\n\t\t<!-- 选择容器 -->\r\n\t\t<view class=\"info picker-content\">\r\n\t\t\t<!-- 完成度 -->\r\n\t\t\t<view class=\"finish-rate\">\r\n\t\t\t\t<text class=\"head\">完成程度</text>\r\n\t\t\t\t<SPicker\r\n\t\t\t\t\t:range=\"finishRates\"\r\n\t\t\t\t\tv-model=\"finishRate\">\r\n\t\t\t\t</SPicker>\r\n\t\t\t</view>\r\n\t\t\t<!-- 资源类型 -->\r\n\t\t\t<view class=\"classify\">\r\n\t\t\t\t<text class=\"head\">资源类型</text>\r\n\t\t\t\t<SPicker\r\n\t\t\t\t\t:range=\"AccessoriesClassify\"\r\n\t\t\t\t\tv-model=\"classify\">\r\n\t\t\t\t</SPicker>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 标签 -->\r\n\t\t<view class=\"info tags\">\r\n\t\t\t<text class=\"head\">标签</text>\r\n\t\t\t<input \r\n\t\t\t\ttype=\"text\" \r\n\t\t\t\tplaceholder-class=\"placeholderStyle\" \r\n\t\t\t\tplaceholder=\"不同标签间空格隔开.\"\r\n\t\t\t\t@input=\"inputTags\"/>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tag\"\r\n\t\t\t\tv-for=\"(tag,index) in tags\"\r\n\t\t\t\t:key=\"index\">\r\n\t\t\t\t{{tag}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 获奖情况 -->\r\n\t\t<view class=\"info prizes\">\r\n\t\t\t<view class=\"head\">\r\n\t\t\t\t获奖情况\r\n\t\t\t\t<text class=\"iconfont icon-tianjia\" @click=\"addPrize\"></text>\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"prize\"\r\n\t\t\t\tv-for=\"(prize,index) in prizeList\"\r\n\t\t\t\t:key=\"index\">\r\n\t\t\t\t<!-- 带搜索的输入框 -->\r\n\t\t\t\t<SearchInput \r\n\t\t\t\t\t:allResults=\"MatchName\"\r\n\t\t\t\t\tplaceholder=\"获奖名称\"\r\n\t\t\t\t\tv-model=\"prize.name\"\r\n\t\t\t\t\t@blur=\"blurMathName($event,index)\">\r\n\t\t\t\t</SearchInput>\r\n\t\t\t\t<!-- 分类，如果该赛事不存在MatchName中 -->\r\n\t\t\t\t<view \r\n\t\t\t\t\tv-if=\"prize.isShowClassify\"\r\n\t\t\t\t\tclass=\"classify\">\r\n\t\t\t\t\t<text class=\"title\">赛事分类</text>\r\n\t\t\t\t\t<SPicker\r\n\t\t\t\t\t\t:range=\"finishRates\"\r\n\t\t\t\t\t\tv-model=\"prize.matchClassify\">\r\n\t\t\t\t\t</SPicker>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 获奖等级 -->\r\n\t\t\t\t<view class=\"prize-grade\">\r\n\t\t\t\t\t<text class=\"title\">获奖等级</text>\r\n\t\t\t\t\t<SPicker\r\n\t\t\t\t\t\t:range=\"prizeGrades\"\r\n\t\t\t\t\t\tv-model=\"prize.level\">\r\n\t\t\t\t\t</SPicker>\r\n\t\t\t\t\t<!-- 未选择图片 -->\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"testify\" \r\n\t\t\t\t\t\tv-if=\"!prize.testifyUrl\"\r\n\t\t\t\t\t\t@click=\"addTestify(index)\">\r\n\t\t\t\t\t\t<text class=\"iconfont icon-tianjia\"></text>\r\n\t\t\t\t\t\t<text>添加证明</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 已选择图片 -->\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\tclass=\"testify\"\r\n\t\t\t\t\t\t@click=\"readTestify(prize.testifyUrl)\">\r\n\t\t\t\t\t\t<text class=\"iconfont icon-readed\" ></text>\r\n\t\t\t\t\t\t<text>查看证明</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<icon\r\n\t\t\t\t\t\tclass=\"remove\"\r\n\t\t\t\t\t\ttype=\"clear\" \r\n\t\t\t\t\t\tsize=\"24\" \r\n\t\t\t\t\t\tcolor=\"#ff0000\"\r\n\t\t\t\t\t\t@click=\"removePrize(index)\"/>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 作者信息  -->\r\n\t\t<view class=\"info author\">\r\n\t\t\t<text class=\"head\">作者信息</text>\r\n\t\t\t<view class=\"input\">\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"name\" \r\n\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\tplaceholder-class=\"placeholderStyle\" \r\n\t\t\t\t\tplaceholder=\"作者名称\" \r\n\t\t\t\t\tv-model=\"authorName\"/>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"contact\" \r\n\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\tplaceholder-class=\"placeholderStyle\" \r\n\t\t\t\t\tplaceholder=\"联系方式\" \r\n\t\t\t\t\tv-model=\"authorContace\"/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 文件选择 -->\r\n\t\t<view class=\"info files\">\r\n\t\t\t<view class=\"head\">\r\n\t\t\t\t附件列表\r\n\t\t\t\t<text class=\"iconfont icon-tianjia\" @click=\"chooseFile\"></text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"remark\">*手机选择文件需要先发送至文件助手或从聊天记录中选择,超过25M的文件请用电脑选择。</text>\r\n\t\t\t<view \r\n\t\t\t\tv-if=\"accessories.length > 0\"\r\n\t\t\t\tclass=\"list\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"file\"\r\n\t\t\t\t\tv-for=\"(file,index) in accessories\"\r\n\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t<view class=\"file-info small\">\r\n\t\t\t\t\t\t<view>{{file.name}}</view>\r\n\t\t\t\t\t\t<view class=\"size\">{{file.size}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<icon \r\n\t\t\t\t\t\tclass=\"remove\"\r\n\t\t\t\t\t\ttype=\"clear\" \r\n\t\t\t\t\t\tsize=\"22\" \r\n\t\t\t\t\t\tcolor=\"#ff0000\"\r\n\t\t\t\t\t\t@click=\"removeFile(index)\"/>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 介绍，支持Markdown -->\r\n\t\t<view class=\"info description\">\r\n\t\t\t<text class=\"head\">资源描述</text>\r\n\t\t\t<button @click=\"isEdit=true\">进入markdown编辑</button>\r\n\t\t</view>\r\n\t\t<view v-if=\"isEdit\" class=\"edit-content\">\r\n\t\t\t<MdEdit \r\n\t\t\t\tplaceholder=\"请输入内容\"\r\n\t\t\t\t:delta=\"descriptionMD\"\r\n\t\t\t\t@editOk=\"editOk\"\r\n\t\t\t\t@input=\"descriptionMD=$event\">\r\n\t\t\t</MdEdit>\r\n\t\t</view>\r\n\t\t<view v-html=\"descriptionHTML\"></view>\r\n\t\t<!-- 上传 -->\r\n\t\t<button class=\"publish\" @click=\"uploadFiles\">发布</button>\r\n\t</view>\n</template>\n\n<script>\r\nimport { getOssSignature,postResource } from \"@/static/request/api_resource.js\"\r\nexport default {\n\tdata() {\r\n\t\tconst AccessoriesClassify = getApp().globalData.AccessoriesClassify\r\n\t\tconst MatchName = getApp().globalData.MatchName\r\n\t\tconst prizeGrades = getApp().globalData.prizeGrades\n\t\treturn {\r\n\t\t\ttitle: \"\",\r\n\t\t\tfinishRate: \"\",\r\n\t\t\tclassify: \"\",\r\n\t\t\ttags: [], // 标签\r\n\t\t\tdescriptionHTML: \"\",\r\n\t\t\tdescriptionMD: \"\",\r\n\t\t\tprizeList: [], // 获奖情况\r\n\t\t\tauthorName: \"\", // 作者名称\r\n\t\t\tauthorContace: \"\", // 作者联系方式\r\n\t\t\taccessories: [], // 附件\r\n\t\t\tfinishRates: [\"100%\",\"80%-100%\",\"50%-80%\",\"0%-50%\"], // 完成度数组\r\n\t\t\tAccessoriesClassify,\r\n\t\t\tMatchName,\r\n\t\t\tprizeGrades,\r\n\t\t\tisEdit: false\n\t\t}\n\t},\r\n\tmethods: {\r\n\t\t/* \r\n\t\t\tname: 输入标签\r\n\t\t\tdesc: 监听输入标签，获取输入内容根据空格分隔\r\n\t\t\tinput: \r\n\t\t\t\t\t\te: Object,input参数,e.detail.value:输入的值\r\n\t\t\treturn: null\r\n\t\t\tchange: \r\n\t\t\t\t\t\t\tthis.tags: Array,标签数组\r\n\t\t\ttime: 2020/10/25\r\n\t\t*/\r\n\t\tinputTags(e)\r\n\t\t{\r\n\t\t\tconst val = e.detail.value\r\n\t\t\tthis.tags = val.split(\" \").filter(tag => tag !== \"\")\r\n\t\t},\r\n\t\t/*\r\n\t\t\tname: 添加获奖\r\n\t\t\tdesc: 追加一个获奖情况，包括名称，赛事，获奖等级，如果是自建赛事还需要选择赛事分类。\r\n\t\t\tchange: \r\n\t\t\t\t\t\t\tthis.prizeList: Array,获奖数组\r\n\t\t\ttime: 2020/10/25\r\n\t\t*/\r\n\t\taddPrize()\r\n\t\t{\r\n\t\t\tthis.prizeList.push({\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tmatchClassify: \"\",\r\n\t\t\t\tisShowClassify: false,\r\n\t\t\t\tlevel: \"\",\r\n\t\t\t\ttestifyUrl: \"\"\r\n\t\t\t})\r\n\t\t},\r\n\t\t/*\r\n\t\t\tname: 添加获奖证明\r\n\t\t\tdesc: 添加一个获奖证明图片\r\n\t\t\tinput:\r\n\t\t\t\t\t\tindex: Number,获奖数组下标\r\n\t\t\tchange: \r\n\t\t\t\t\t\t\tthis.prizeList[index].testifyUrl: String,获奖证明\r\n\t\t\ttime: 2020/10/25\r\n\t\t*/\r\n\t\taddTestify(index)\r\n\t\t{\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1, //默认9\r\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\tsuccess:  (img) => {\r\n\t\t\t\t\tthis.prizeList[index].testifyUrl = img.tempFilePaths[0]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/*\r\n\t\t\tname: 输入比赛名称结束\r\n\t\t\tdescription: 获取比赛名称，与库中已有比赛配对，若不存在则表示为自建，需要用户选择分类\r\n\t\t\tinput: \r\n\t\t\t\t\t\tval: String,输入内容\r\n\t\t\t\t\t\tindex: Numnber,对应数组 下标\r\n\t\t\tchange:\r\n\t\t\t\t\t\t\tprizeList[index].isShowClassify: Boolean,是否展示分类\r\n\t\t\ttime: 2020/10/24\r\n\t\t*/\r\n\t\tblurMathName(val,index)\r\n\t\t{\r\n\t\t\tif(this.MatchName.indexOf(val) === -1 && val !== \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.prizeList[index].isShowClassify = true\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.prizeList[index].isShowClassify = false\r\n\t\t\t}\r\n\t\t},\r\n\t\t/*\r\n\t\t\tname: 查看获奖证明\r\n\t\t\tdesc: 查看获奖证明图片\r\n\t\t\tinput:\r\n\t\t\t\t\t\turl: String,证明链接地址\r\n\t\t\tchange: \r\n\t\t\ttime: 2020/10/26\r\n\t\t*/\r\n\t\treadTestify(url)\r\n\t\t{\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: [url]\r\n\t\t\t})\r\n\t\t},\r\n\t\t/*\r\n\t\t\tname: 删除获奖情况\r\n\t\t\tdesc: 根据下标删除获奖列表,需要先调用modal提示框\r\n\t\t\tinput:\r\n\t\t\t\t\t\tindex: Number,下标\r\n\t\t\tchange: \r\n\t\t\t\t\t\tthis.prizeList: Array,获奖列表\r\n\t\t\ttime: 2020/10/25\r\n\t\t*/\r\n\t\tremovePrize(index)\r\n\t\t{\r\n\t\t\tthis.gShowModal(\r\n\t\t\t\t'确认删除该获奖记录?',\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.prizeList.splice(index,1)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t},\r\n\t\t/* \r\n\t\t\tname: 选择附件\r\n\t\t\tdescription: 选择需要上传的附件\r\n\t\t\ttime: 2020/10/24\r\n\t\t*/\r\n\t\tchooseFile()\r\n\t\t{\r\n\t\t\tfunction renderSize(fsize){\r\n\t\t\t\tconst unitArr = new Array(\"Bytes\",\"KB\",\"MB\",\"GB\",\"TB\",\"PB\",\"EB\",\"ZB\",\"YB\")\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tlet srcsize = parseFloat(fsize)\r\n\t\t\t\tindex = Math.floor(Math.log(srcsize) / Math.log(1024))\r\n\t\t\t\tlet size = srcsize / Math.pow(1024,index)\r\n\t\t\t\tsize = size.toFixed(2)\r\n\t\t\t\treturn size + unitArr[index]\r\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: \"选择中...\"\r\n\t\t\t})\r\n\t\t\t/* 选择文件API */\r\n\t\t\twx.chooseMessageFile({\r\n\t\t\t  count: 5,\r\n\t\t\t  type: 'all',\r\n\t\t\t  success: (res) => {\r\n\t\t\t\t\tthis.accessories.push(...res.tempFiles.map(file => {\r\n\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\tname: file.name,\r\n\t\t\t\t\t\t\turl: file.path,\r\n\t\t\t\t\t\t\tsize: renderSize(file.size)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})) \r\n\t\t\t  },\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\tthis.gToastError(err.errMsg)\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/* \r\n\t\t\tname: 删除文件\r\n\t\t\tdesc: 根据下标删除附件列表,需要先调用modal提示框\r\n\t\t\tinput:\r\n\t\t\t\t\t\tindex: Number,下标\r\n\t\t\tchange: \r\n\t\t\t\t\t\tthis.accessories: Array,附件列表\r\n\t\t\ttime: 2020/10/25\r\n\t\t*/\r\n\t\tremoveFile(index)\r\n\t\t{\r\n\t\t\tthis.gShowModal(\r\n\t\t\t\t`确认删除 ${this.accessories[index].name}?`,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.accessories.splice(index,1)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t},\r\n\t\teditOk(html)\r\n\t\t{\r\n\t\t\tthis.descriptionHTML = html\r\n\t\t\tthis.isEdit = false\r\n\t\t},\r\n\t\t/* \r\n\t\t\tname: 验证输入内容\r\n\t\t\tdesc: 验证输入的资源内容\r\n\t\t\t\t\t\t若是已存在分类则选择分类填充matchClassify的值\r\n\t\t\t\t\t\t去掉isShowClassify\r\n\t\t\t\t\t\t添加testifyName值，取名为 /联系方式/时间戳\r\n\t\t*/\r\n\t  verifyInfo()\r\n\t\t{\r\n\t\t\t/* 整合数据 */\r\n\t\t\tconst data = {\r\n\t\t\t\ttitle: this.title,\r\n\t\t\t\tfinishRate: this.finishRate,\r\n\t\t\t\tclassify: this.classify,\r\n\t\t\t\ttags: this.tags,\r\n\t\t\t\tprizeList:  JSON.parse(JSON.stringify(this.prizeList)),\r\n\t\t\t\tauthorName: this.authorName,\r\n\t\t\t\tauthorContace: this.authorContace,\r\n\t\t\t\taccessories: JSON.parse(JSON.stringify(this.accessories)),\r\n\t\t\t\tdescription: this.description\r\n\t\t\t}\r\n\t\t\tif(data.title === \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.gToastError(\"请输入资源标题\")\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tif(data.finishRate === \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.gToastError(\"请选择完成程度\")\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tif(data.classify === \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.gToastError(\"请选择资源类型\")\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tif(data.authorName === \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.gToastError(\"请输入作者姓名\")\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tif(data.authorContace === \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.gToastError(\"请输入联系方式\")\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tif(data.accessories.length === 0)\r\n\t\t\t{\r\n\t\t\t\tthis.gToastError(\"请选择附件\")\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t/* 判断获奖证明 */\r\n\t\t\tfor(let i=0;i<data.prizeList.length;i++){\r\n\t\t\t\tconst prize = data.prizeList[i]\r\n\t\t\t\tif(prize.name === \"\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.gToastError(\"获奖名称为空\")\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif(prize.level === \"\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.gToastError(\"获奖等级为空\")\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif(prize.testifyUrl === \"\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.gToastError(\"获奖证明为空\")\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tdelete data.prizeList[i].isShowClassify\r\n\t\t\t}\r\n\t\t\treturn data\r\n\t\t},\r\n\t\t/*\r\n\t\t\tname: 上传文件\r\n\t\t\tdesc: 上传证明材料，附件，并对需要提交的数据进行整理\r\n\t\t\ttime: 2020/10/26\r\n\t\t*/\r\n\t\tuploadFiles()\r\n\t\t{\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: \"获取签名中...\",\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t\tconst data = this.verifyInfo()\r\n\t\t\tif(!data)\r\n\t\t\t{\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/* 获取签名 */\r\n\t\t\tgetOssSignature()\r\n\t\t\t.then(signature => {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"上传文件中...\",\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\t/* 上传证明材料 */\r\n\t\t\t\tlet successAmount = 0\r\n\t\t\t\tdata.prizeList.forEach((prize,i) => {\r\n\t\t\t\t\t/* 检测类型，仅支持jpg,jpeg,png */\r\n\t\t\t\t\tconst temp = prize.testifyUrl.split(\".\")\r\n\t\t\t\t\tconst filename = `${Date.now()}.${temp[temp.length-1]}`\r\n\t\t\t\t\tthis.gUploadFile(prize.testifyUrl,filename,signature.data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t/* 修改testifyUrl */\r\n\t\t\t\t\t\tprize.testifyUrl = res.url\r\n\t\t\t\t\t\tsuccessAmount++\r\n\t\t\t\t\t\tif(successAmount === (data.prizeList.length + data.accessories.length))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.publish(data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.gToastError(\"上传出现错误\")\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t/* 上传附件 */\r\n\t\t\t\tdata.accessories.forEach((item,i) => {\r\n\t\t\t\t\tthis.gUploadFile(item.url,item.name,signature.data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t/* 修改url，指向对应地址 */\r\n\t\t\t\t\t\titem.url = res.url\r\n\t\t\t\t\t\tsuccessAmount++\r\n\t\t\t\t\t\tif(successAmount === (data.prizeList.length + data.accessories.length))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.publish(data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.gToastError(\"上传出现错误\")\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tthis.gToastError(\"获取签名错误\")\r\n\t\t\t})\r\n\t\t},\r\n\t\t/* \r\n\t\t\tname: 发表资源\r\n\t\t\tdesc: 上传证明和附件后向服务器提交表单\r\n\t\t\tinput:\r\n\t\t\t\t\t\tdata: Object,需要提交的数据\r\n\t\t*/\r\n\t\tpublish(data)\r\n\t\t{\r\n\t\t\tuni.hideLoading()\r\n\t\t\t/* 请求服务器 */\r\n\t\t\tpostResource(data)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tthis.gToastSuccess(\"上传成功\")\r\n\t\t\t})\r\n\t\t\tconsole.log(data)\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\t/* 判断用户是否签署合同，若为签署则跳转签署界面 */\r\n\t\t// if(!getApp().globalData.gUserInfo.signedContract)\r\n\t\t// {\r\n\t\t// \tuni.redirectTo({\r\n\t\t// \t\turl: \"./Contract\",\r\n\t\t// \t\tsuccess: () => {\r\n\t\t// \t\t\tthis.gToastError(\"请先签署合同\")\r\n\t\t// \t\t}\r\n\t\t// \t})\r\n\t\t// }\r\n\t},\r\n}\n</script>\n\n<style lang=\"stylus\">\n.up-resource\r\n\tposition relative\r\n\tmin-height 100vh\r\n\tpadding 10rpx 30rpx\r\n\tinput\r\n\t\tbackground-color var(--origin2)\r\n\t\tborder-radius 10px\r\n\t/* 不同容器间共同样式 */\r\n\t.info\r\n\t\tmargin 10px 0\r\n\t\t/* 提示文字 */\r\n\t\t.head\r\n\t\t\tfont-weight 600\r\n\t\t\tcolor var(--origin4)\r\n\t\t\tdisplay flex\r\n\t\t\talign-items center\r\n\t\t/* 图标 */\r\n\t\t.iconfont\r\n\t\t\tmargin-left 10px\r\n\t\t\tfont-size 42rpx\r\n\t\t\tfont-weight 400\r\n\t\t\tcolor var(--origin4)\r\n\t/* 需要flex布局的容器 */\r\n\t.picker-content\r\n\t\tdisplay grid\r\n\t\tgrid-template-columns 1fr 1fr\r\n\t\tgrid-gap 20rpx\r\n\t\ttext-align center\r\n\t\tline-height 2\r\n\t/* 标签 */\r\n\t.tags .tag\r\n\t\tmargin 5px\r\n\t\tpadding 0 10px\r\n\t\tborder var(--border1)\r\n\t\tborder-radius 20px\r\n\t\tdisplay inline-block\r\n\t/* 获奖 */\r\n\t.prizes .prize\r\n\t\tfont-size 28rpx\r\n\t\tmargin 10px 0\r\n\t\t.title\r\n\t\t\tmargin-right 5px\r\n\t\t\tcolor var(--origin4)\r\n\t\t.search-input\r\n\t\t\tmargin-bottom 10px\r\n\t\t\tpadding 10px 5px\r\n\t\t\tbackground-color var(--origin2)\r\t\t\tborder-radius 10px \r\n\t\t.classify\r\n\t\t\tmargin 5px 0\r\n\t\t\ttext-align center\r\n\t\t\tdisplay flex\r\n\t\t\talign-items center\r\n\t\t.prize-grade\r\n\t\t\tposition relative\r\n\t\t\ttext-align center\r\n\t\t\tdisplay flex\r\n\t\t\talign-items center\r\n\t\t\t.testify\r\n\t\t\t\tmargin-left 10px\r\n\t\t\t\tcolor var(--origin4)\r\n\t\t\t\tdisplay flex\r\n\t\t\t\talign-items center\r\n\t\t\t\ttext\r\n\t\t\t\t\tmargin-right 2px\r\n\t\t\t.remove\r\n\t\t\t\tposition absolute\r\n\t\t\t\tright 0\r\n\t/* 作者信息 */\r\n\t.author .input\r\n\t\tdisplay grid\r\n\t\tgrid-template-columns 2fr 3fr\r\n\t\tgrid-gap 10px\r\n\t/* 添加附件 */\r\n\t.files\r\n\t\t.remark\r\n\t\t\tfont-size 28rpx\r\n\t\t\tcolor var(--gray)\r\n\t\t.list\r\n\t\t\tborder 1px solid var(--origin4)\r\n\t\t\tborder-radius 10px\r\n\t\t\t.file\r\n\t\t\t\tposition relative\r\n\t\t\t\tpadding 5px\r\n\t\t\t\tborder-bottom 1px dotted var(--origin4)\r\n\t\t\t\t&:last-of-type\r\n\t\t\t\t\tborder 0\r\n\t\t\t\t.file-info\r\n\t\t\t\t\twidth calc(100% - 30px)\r\n\t\t\t\t\twhite-space pre-wrap\r\n\t\t\t\t\t.size\r\n\t\t\t\t\t\tcolor var(--origin4)\r\n\t\t\t\t\t\ttext-align end\r\n\t\t\t\t.remove\r\n\t\t\t\t\tposition absolute\r\n\t\t\t\t\ttop 50%\r\n\t\t\t\t\ttransform translateY(-50%)\r\n\t\t\t\t\tright 5rpx\r\n\t/* 描述 */\r\n\t.description button\r\n\t\tcolor #FFFFFF\r\n\t\tbackground-color var(--button-bg)\r\n\t.edit-content\r\n\t\tz-index 20\r\n\t\tposition fixed\r\n\t\ttop 0\r\n\t\tleft 0\r\n\t\twidth 100%\r\n\t\theight 100%\r\n\t\tbackground-color #FFFFFF\r\n\t/* 上传资源 */\r\n\t.publish\r\n\t\tmargin 10px auto\r\n\t\tbackground-color var(--button-bg)\r\n\t\tcolor #FFFFFF\r\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--11-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./UpResource.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--11-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./UpResource.vue?vue&type=style&index=0&lang=stylus&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1604566353442\n      var cssReload = require(\"G:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}